#:kivy 2.0.0
#:import get_color_from_hex kivy.utils.get_color_from_hex
TelaGerenciadora: 
    Tela1:
    # Tela2:
    Tela3:
    # Tela4:
    TelaAvalia:

<Tela1>:
    name: 'tela1'
    Screen: 
    BoxLayout:
        orientation: 'vertical'
        MDToolbar:
            title: 'ABR - Analise de barragens Recife'
            md_bg_color: get_color_from_hex("#87CEFA")
            specific_text_color: get_color_from_hex("#4a4939")
            left_action_items: [["menu", lambda x: x]]
            right_action_items: [["dots-vertical", lambda x: x]]
        TelaLogin:



<Tela3>:
    name: 'tela3'
    
    MDNavigationLayout:

        ScreenManager:

            MDScreen:

                MDToolbar:
                    title: "ABR - analise de barragem Recife"
                    elevation: 10
                    pos_hint: {"top": 1}
                    md_bg_color: get_color_from_hex("#87CEFA")
                    specific_text_color: get_color_from_hex("#4a4939")
                    left_action_items:
                        [['menu', lambda x: nav_drawer.set_state("open")]]


                FloatLayout: 

                    MDTextField:
                        id: text_pesquisa
                        hint_text: 'id:'
                        size_hint_x: 0.4
                        pos_hint: {'center_x': 0.3, 'center_y': 0.8}  
                    MDRaisedButton: 
                        id: btn_pesquisa
                        text: 'Pesquisar'
                        pos_hint: {'center_x': 0.8, 'center_y': 0.8}  
                        on_release: root.pesquisa_id()

                    BoxLayout:
                        pos_hint: {'center_x': 0.5, 'center_y': 0.7}  
                        MDLabel:
                            id: lb_1
                            text: ''
                            halign: 'left'      
                    MDRaisedButton:
                        id: btn_1
                        text: 'selecionar'
                        pos_hint: {'center_x': 0.8, 'center_y': 0.7} 
                        on_release: root.btn_1()
                        on_release: 
                            app.root.current = 'telaAvalia' 

                    BoxLayout:
                        pos_hint: {'center_x': 0.5, 'center_y': 0.6}  
                        MDLabel:
                            id: lb_2
                            text: ''
                            halign: 'left'      
                    MDRaisedButton:
                        id: btn_2
                        text: 'selecionar'
                        pos_hint: {'center_x': 0.8, 'center_y': 0.6}    
                        on_release: root.btn_2()
                        on_release: 
                            app.root.current = 'telaAvalia' 

                    BoxLayout:
                        pos_hint: {'center_x': 0.5, 'center_y': 0.5}  
                        MDLabel:
                            id: lb_3
                            text: ''
                            halign: 'left'      
                    MDRaisedButton:
                        id: btn_3
                        text: 'selecionar'
                        pos_hint: {'center_x': 0.8, 'center_y': 0.5}    
                        on_release: root.btn_3()
                        on_release: 
                            app.root.current = 'telaAvalia' 

                    BoxLayout:
                        pos_hint: {'center_x': 0.5, 'center_y': 0.4}  
                        MDLabel:
                            id: lb_4
                            text: ''
                            halign: 'left'      
                    MDRaisedButton:
                        id: btn_4
                        text: 'selecionar'
                        pos_hint: {'center_x': 0.8, 'center_y': 0.4} 
                        on_release: root.btn_4()
                        on_release: 
                            app.root.current = 'telaAvalia' 

                    BoxLayout:
                        pos_hint: {'center_x': 0.5, 'center_y': 0.3}  
                        MDLabel:
                            id: lb_5
                            text: ''
                            halign: 'left'      
                    MDRaisedButton:
                        id: btn_5
                        text: 'selecionar'
                        pos_hint: {'center_x': 0.8, 'center_y': 0.3} 
                        on_release: root.btn_5()
                        on_release: 
                            app.root.current = 'telaAvalia' 
                        
                    MDRaisedButton:
                        id: exibe
                        text: 'Exibir'
                        pos_hint: {'center_x': 0.5, 'center_y': 0.2}  
                        on_release: root.carrega_selecao()

                    MDIconButton:
                        icon: "database-arrow-left"
                        theme_icon_color: "Custom"
                        icon_color: 'black'     
                        pos_hint: {'center_x': 0.3, 'center_y': 0.2}  
                        icon_size: "50sp"   
                        on_release: root.carrega_selecao()
                        on_release: root.antiga_pagina()

                    MDIconButton:
                        icon: "database-arrow-right"
                        theme_icon_color: "Custom"
                        icon_color: 'black'     
                        pos_hint: {'center_x': 0.7, 'center_y': 0.2}     
                        icon_size: "50sp"
                        on_release: root.carrega_selecao()
                        on_release: root.nova_pagina()

#-----------------------------------------------------------------------
        MDNavigationDrawer:
            id: nav_drawer
            md_bg_color: get_color_from_hex("#ADD8E6")
            anchor: 'left'

            ContentNavigationDrawer:

                MDBoxLayout:
                    orientation: 'vertical'
                    MDFloatLayout:
                        MDNavigationDrawerHeader:
                            title: "Telas"
                            text: "Consulta e informações"
                            spacing: "4dp"
                            padding: "12dp", 0, 0, "56dp"
                            pos_hint: {'center_x': .5, 'center_y': .9}

                        MDNavigationDrawerLabel:
                            text: "Banco:"
                            pos_hint: {'center_x': .5, 'center_y': .8}

                        MDRoundFlatIconButton: 
                            icon: 'home'
                            text: 'Tela de avaliação'
                            pos_hint: {'center_x': .5, 'center_y': .7}
                            size_hint_x: 1
                            text_color: 'black'
                            line_color: 'black'
                            theme_icon_color: "Custom"
                            icon_color: 'black'
                            on_release: 
                                # app.root.current = 'tela2'  

                        MDRoundFlatIconButton: 
                            icon: 'magnify-plus-outline'
                            text: 'Selecionar barragem'
                            pos_hint: {'center_x': .5, 'center_y': .6}
                            size_hint_x: 1
                            text_color: 'black'
                            line_color: 'black'
                            theme_icon_color: "Custom"
                            icon_color: 'black'
                            on_release: 
                                # app.root.current = 'tela3'

                        MDRoundFlatIconButton: 
                            icon: 'bookmark-check-outline'
                            text: 'Barragens avaliadas'
                            pos_hint: {'center_x': .5, 'center_y': .5}
                            size_hint_x: 1
                            text_color: 'black'
                            line_color: 'black'
                            theme_icon_color: "Custom"
                            icon_color: 'black'
                            on_release:
                                # app.root.current = 'tela4'

                        MDRoundFlatIconButton: 
                            icon: 'alien'
                            text: 'inserir...'
                            pos_hint: {'center_x': .5, 'center_y': .4}
                            size_hint_x: 1
                            text_color: 'black'
                            line_color: 'black'
                            theme_icon_color: "Custom"
                            icon_color: 'black'




<TelaAvalia>:
    name: 'telaAvalia'
    
    MDNavigationLayout:

        ScreenManager:

            MDScreen:

                MDToolbar:
                    title: "ABR - analise de barragem Recife"
                    elevation: 10
                    pos_hint: {"top": 1}
                    md_bg_color: get_color_from_hex("#87CEFA")
                    specific_text_color: get_color_from_hex("#4a4939")
                    left_action_items:
                        [['menu', lambda x: nav_drawer.set_state("open")]]

                FloatLayout:
                    BoxLayout:
                        pos_hint: {'center_x': 0.6, 'center_y': 0.85}
                        MDLabel: 
                            id: nome_barragem
                            text: '( NOME BARRAGEM )'
                            text_color: 'black'
                            font_style: 'H6'
                    MDIconButton:
                        icon: 'refresh'
                        pos_hint: {'center_x': .8, 'center_y': .85}
                        on_release: root.refresh()
                    
                    BoxLayout:
                        pos_hint: {'center_x': 0.6, 'center_y': 0.78}
                        MDLabel: 
                            id: indicador
                            text: 'Erupsões'                        
                            text_color: 'black'
                            font_style: 'H6'

                    BoxLayout:
                        pos_hint: {'center_x': 0.6, 'center_y': 0.7}
                        MDLabel: 
                            id: situacao
                            text: 'SITUAÇÃO: ( )'
                            text_color: 'black'

                    BoxLayout:
                        pos_hint: {'center_x': 1, 'center_y': 0.7}
                        MDLabel: 
                            id: statusSituacao
                            text: ''
                            theme_text_color: "Custom"
                            text_color: 1, 0, 0, 1

                    MDRaisedButton:
                        pos_hint: {'center_x': 0.2, 'center_y': 0.62}
                        text: 'NA'
                        on_release: 
                            root.NA()

                    MDRaisedButton:
                        pos_hint: {'center_x': 0.4, 'center_y': 0.62}
                        text: 'NE'
                        on_release: 
                            root.NE()

                    MDRaisedButton:
                        pos_hint: {'center_x': 0.6, 'center_y': 0.62}
                        text: 'PV'
                        on_release: 
                            root.PV()

                    MDRaisedButton:
                        pos_hint: {'center_x': 0.8, 'center_y': 0.62}
                        text: 'DS'
                        on_release: 
                            root.DS()

                    MDRaisedButton:
                        pos_hint: {'center_x': 0.2, 'center_y': 0.54}
                        text: 'DI'
                        on_release: 
                            root.DI()

                    MDRaisedButton:
                        pos_hint: {'center_x': 0.4, 'center_y': 0.54}
                        text: 'PC'
                        on_release: 
                            root.PC()

                    MDRaisedButton:
                        pos_hint: {'center_x': 0.6, 'center_y': 0.54}
                        text: 'AU'
                        on_release: 
                            root.AU()

                    MDRaisedButton:
                        pos_hint: {'center_x': 0.8, 'center_y': 0.54}
                        text: 'NI'
                        on_release: 
                            root.NI()

                    BoxLayout:
                        pos_hint: {'center_x': 0.6, 'center_y': 0.46}
                        MDLabel: 
                            id: magnetude
                            text: 'MAGNETUDE: ( )'          
                            text_color: 'black'  
                    BoxLayout:
                        pos_hint: {'center_x': 1, 'center_y': 0.46}
                        MDLabel: 
                            id: statusMagnetude
                            text: ''          
                            theme_text_color: "Custom"
                            text_color: 1, 0, 0, 1                            
                    MDRaisedButton:
                        pos_hint: {'center_x': 0.2, 'center_y': 0.39}
                        text: 'I'
                        on_release: 
                            root.I()

                    MDRaisedButton:
                        pos_hint: {'center_x': 0.4, 'center_y': 0.39}
                        text: 'P'
                        on_release: 
                            root.P()
                                                    
                    MDRaisedButton:
                        pos_hint: {'center_x': 0.6, 'center_y': 0.39}
                        text: 'T'
                        on_release: 
                            root.T()
                                                    
                    MDRaisedButton:
                        pos_hint: {'center_x': 0.8, 'center_y': 0.39}
                        text: 'G'
                        on_release: 
                            root.G()


                    BoxLayout:
                        pos_hint: {'center_x': 0.6, 'center_y': 0.3}
                        MDLabel: 
                            id: np
                            text: 'NP: ( )'     
                            text_color: 'black'
                    BoxLayout:
                        pos_hint: {'center_x': 1, 'center_y': 0.3}
                        MDLabel: 
                            id: statusNp
                            text: ''     
                            theme_text_color: "Custom"
                            text_color: 1, 0, 0, 1                         
                    MDRaisedButton:
                        pos_hint: {'center_x': 0.2, 'center_y': 0.23}
                        text: '0'
                        on_release: 
                            root._0()                            

                    MDRaisedButton:
                        pos_hint: {'center_x': 0.4, 'center_y': 0.23}
                        text: '1'
                        on_release: 
                            root._1()                            

                    MDRaisedButton:
                        pos_hint: {'center_x': 0.6, 'center_y': 0.23}
                        text: '2'
                        on_release: 
                            root._2()                            

                    MDRaisedButton:
                        pos_hint: {'center_x': 0.8, 'center_y': 0.23}
                        text: '3'    
                        on_release: 
                            root._3()                            


                        
                    MDIconButton:
                        id: btn_voltar
                        pos_hint: {'center_x': 0.1, 'center_y': 0.1}
                        icon: 'arrow-left-drop-circle-outline'
                        icon_size: "40sp"
                        on_release:
                            root.voltar()
                            
                    BoxLayout:
                        pos_hint: {'center_x': 1, 'center_y': 0.1}
                        MDLabel: 
                            id: quantidade
                            text: '1/7'     
                            text_color: 'black'

                    MDIconButton:
                        id: btn_proximo
                        pos_hint: {'center_x': 0.9, 'center_y': 0.1}
                        icon: 'arrow-right-drop-circle-outline'
                        icon_size: "40sp"
                        on_release:
                            root.proximo()

#---------------//---------------------------------------------------------
        MDNavigationDrawer:
            id: nav_drawer
            md_bg_color: get_color_from_hex("#ADD8E6")
            anchor: 'left'

            ContentNavigationDrawer:

                MDBoxLayout:
                    orientation: 'vertical'
                    MDFloatLayout:
                        MDNavigationDrawerHeader:
                            title: "Telas"
                            text: "Consulta e informações"
                            spacing: "4dp"
                            padding: "12dp", 0, 0, "56dp"
                            pos_hint: {'center_x': .5, 'center_y': .9}

                        MDNavigationDrawerLabel:
                            text: "Banco:"
                            pos_hint: {'center_x': .5, 'center_y': .8}

                        MDRoundFlatIconButton: 
                            icon: 'home'
                            text: 'Tela de avaliação'
                            pos_hint: {'center_x': .5, 'center_y': .7}
                            size_hint_x: 1
                            text_color: 'black'
                            line_color: 'black'
                            theme_icon_color: "Custom"
                            icon_color: 'black'
                            on_release: 
                                # app.root.current = 'tela2'  

                        MDRoundFlatIconButton: 
                            icon: 'magnify-plus-outline'
                            text: 'Selecionar barragem'
                            pos_hint: {'center_x': .5, 'center_y': .6}
                            size_hint_x: 1
                            text_color: 'black'
                            line_color: 'black'
                            theme_icon_color: "Custom"
                            icon_color: 'black'
                            on_release: 
                                # app.root.current = 'tela3'

                        MDRoundFlatIconButton: 
                            icon: 'bookmark-check-outline'
                            text: 'Barragens avaliadas'
                            pos_hint: {'center_x': .5, 'center_y': .5}
                            size_hint_x: 1
                            text_color: 'black'
                            line_color: 'black'
                            theme_icon_color: "Custom"
                            icon_color: 'black'
                            on_release:
                                # app.root.current = 'tela4'



                        MDRoundFlatIconButton: 
                            icon: 'alien'
                            text: 'inserir...'
                            pos_hint: {'center_x': .5, 'center_y': .4}
                            size_hint_x: 1
                            text_color: 'black'
                            line_color: 'black'
                            theme_icon_color: "Custom"
                            icon_color: 'black'









<LoginCard>:
    pos_hint: {'center_x': .5, 'center_y': .5}
    orientation: 'vertical'
    size_hint: .5, .5

    MDBoxLayout: 
        size_hint_y: .2
        padding: [25, 0, 25, 0]
        md_bg_color: app.theme_cls.primary_color
        size_hint_y: .1

        MDLabel:
            text: 'Bem-vindo'
            theme_text_color: 'Custom'
            text_color: 1,1,1,1 

        MDIconButton:
            icon: "check"
            theme_text_color: 'Custom'
            text_color: 1,1,1,1 

    MDFloatLayout: 

        MDRaisedButton: 
            pos_hint: {'center_x': .5, 'center_y': .2}
            size_hint_x: .9
            text: 'Próximo'
            on_release: 
                app.root.current = 'tela3'
            #aqui

<SenhaCard>:
    pos_hint: {'center_x': .5, 'center_y': .5}
    orientation: 'vertical'
    size_hint: .9, 1
    
    MDBoxLayout: 
        size_hint_y: .2
        padding: [25, 0, 25, 0]
        md_bg_color: app.theme_cls.primary_color
        size_hint_y: .1


        MDLabel:
            text: 'Mudar senha'
            theme_text_color: 'Custom'
            text_color: 1,1,1,1 
        MDIconButton:
            icon: "close"
            theme_text_color: 'Custom'
            text_color: 1,1,1,1 
            on_release: root.fechar()
            

    MDFloatLayout: 

        MDLabel:
            id: result_novaSenha
            text: ''
            pos_hint: {'center_y': .65}
            halign: 'right'

        MDTextField:
            id: enviar_cod
            pos_hint: {'center_x': .5, 'center_y': .9}
            size_hint_x: .9
            hint_text: 'Email'
            mode: 'rectangle'     
        MDRaisedButton:
            text:'Enviar código' 
            pos_hint: {'center_x': .8, 'center_y': .75}
            on_release: root.enviar_cod()

        MDRaisedButton:
            text:'Confirmar código' 
            pos_hint: {'center_x': .2, 'center_y': .6}
            on_release: root.confimar_cod()

        MDTextField:
            id: codigo
            pos_hint: {'center_x': .2, 'center_y': .75}
            size_hint_x: .3
            hint_text: 'Código'
            mode: 'rectangle'

        MDTextField:
            pos_hint: {'center_x': .5, 'center_y': .4}
            size_hint_x: .9
            hint_text: 'Nova senha:'
            mode: 'rectangle'
        MDTextField:
            pos_hint: {'center_x': .5, 'center_y': .25}
            size_hint_x: .9
            hint_text: 'Confirmar nova senha:'
            mode: 'rectangle'
        MDRaisedButton: 
            pos_hint: {'center_x': .5, 'center_y': .1}
            size_hint_x: .9
            text: 'Alterar'

<CadastrarCard>:
    pos_hint: {'center_x': .5, 'center_y': .5}
    orientation: 'vertical'
    size_hint: .7, .7
    
    MDBoxLayout: 
        size_hint_y: .2
        padding: [25, 0, 25, 0]
        md_bg_color: app.theme_cls.primary_color

        MDLabel:
            text: 'Cadastro de usuário'
            theme_text_color: 'Custom'
            text_color: 1,1,1,1 
        MDIconButton:
            icon: "close"
            theme_text_color: 'Custom'
            text_color: 1,1,1,1 
            on_release: root.fechar()
            
    MDFloatLayout: 

        MDLabel:
            id: result
            text: ''
            pos_hint: {'center_y': .95}
            halign: 'left'

        MDTextField:
            id: newemail
            pos_hint: {'center_x': .5, 'center_y': .8}
            size_hint_x: .9
            hint_text: 'E-mail'
            mode: 'rectangle'
        MDTextField:
            id: newsenha
            pos_hint: {'center_x': .5, 'center_y': .6}
            size_hint_x: .9
            hint_text: 'Senha:'
            mode: 'rectangle'
        MDTextField:
            id: newconfsenha
            pos_hint: {'center_x': .5, 'center_y': .4}
            size_hint_x: .9
            hint_text: 'Confirmar senha:'
            mode: 'rectangle'
        MDRaisedButton: 
            pos_hint: {'center_x': .5, 'center_y': .2}
            size_hint_x: .9
            text: 'Cadastrar'
            on_release: root.new_user(newemail.text, newsenha.text, newconfsenha.text)

<TelaLogin>:
    MDIconButton:
        icon: 'wall'
        theme_icon_color: "Custom"
        icon_color: get_color_from_hex("#ADD8E6")
        user_font_size: '75px'
        pos_hint: {'center_x': .5, 'center_y': .8}
    MDTextField:
        id: email
        size_hint_x: .9
        hint_text: 'E-mail:'
        pos_hint: {'center_x': .5, 'center_y': .6}
        mode: 'rectangle'
    MDTextField:
        id: senha
        size_hint_x: .9
        hint_text: 'Senha:'
        pos_hint: {'center_x': .5, 'center_y': .5}
        mode: 'rectangle'
        password: True
    MDRaisedButton:
        text: 'Login'
        pos_hint: {'center_x': .5, 'center_y': .4}
        size_hint_x: .9
        on_release: root.valida_user()

    MDRaisedButton:
        size_hint_x: .2
        pos_hint: {'center_x': .5, 'center_y': .3}
        text: 'Cadastrar' 
        on_release: root.cadastrar_card()

    MDLabel: 
        text: 'Esqueceu sua senha?'
        halign: 'center'
        pos_hint: {'center_y': .2}

    MDRaisedButton:
        size_hint_x: .2
        pos_hint: {'center_x': .5, 'center_y': .1}
        text: 'Clique aqui para\nredefinir senha!' 
        on_release: root.abrir_card()

